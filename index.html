<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Restaurantvote by ivanmakhnyk</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Restaurantvote</h1>
      <h2 class="project-tagline">Sample:  JSON API using Hibernate/Spring/SpringMVC (without frontend)</h2>
      <a href="https://github.com/ivanmakhnyk/restaurantvote" class="btn">View on GitHub</a>
      <a href="https://github.com/ivanmakhnyk/restaurantvote/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/ivanmakhnyk/restaurantvote/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><strong>Sample:  Hibernate/Spring/SpringMVC/REST</strong></p>

<h2>
<a id="run-sample" class="anchor" href="#run-sample" aria-hidden="true"><span class="octicon octicon-link"></span></a>Run sample</h2>

<p><strong>Maven:</strong></p>

<p>To run the application use Maven command line </p>

<pre><code>  mvn clean spring-boot:run 
</code></pre>

<p><strong>Use IDE:</strong></p>

<p>Run main method in <a href="https://github.com/ivanmakhnyk/restaurantvote/blob/master/src/main/java/org/imakhnyk/interview/menuvoting/Application.java">org.imakhnyk.interview.menuvoting.Application.java</a></p>

<p><strong>Run as Jar file:</strong></p>

<p>Or you can build the JAR file with </p>

<pre><code>  mvn clean package 
</code></pre>

<p>and run the JAR by typing: </p>

<pre><code>  java -jar target/menuvoting-0.1.0.jar
</code></pre>

<p><strong>Logging:</strong>
Logging output is displayed. The service should be up and running within a few seconds.</p>

<p><strong>Test the service:</strong>
Now that the web site is running, visit <a href="http://localhost:8080/echo">http://localhost:8080/echo</a>, where you see:
<code>{  "counter": 0,  "content": "Hello, World!"}</code>
Provide a name query string parameter with <a href="http://localhost:8080/echo?name=Test">http://localhost:8080/echo?name=Test</a>. Notice how the message changes from
<code>{  "counter": 6,  "content": "Hello, Test!"}</code></p>

<h2>
<a id="api-document" class="anchor" href="#api-document" aria-hidden="true"><span class="octicon octicon-link"></span></a>API document</h2>

<p>To see API document open <a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a> (admin/adminp)</p>

<p><img src="https://github.com/ivanmakhnyk/restaurantvote/blob/master/api.png?raw=true" alt="API screen"></p>

<p>Application is connected to in memory database with mock data (for more details see <a href="https://github.com/ivanmakhnyk/restaurantvote/blob/master/src/main/java/org/imakhnyk/interview/menuvoting/AppConfig.java">AppConfig.java</a> file):</p>

<ul>
<li>Accouts to login (login/password): user/userp, admin/adminp, user1/user1p, user2/user2p, admin1/admin1p</li>
<li>Three restaurants mocked with few menu items for current date.</li>
</ul>

<p>To change database <a href="https://github.com/ivanmakhnyk/restaurantvote/blob/master/src/main/resources/application.properties">application.properties</a> config file should be updated (add SQL driver maven dependency)</p>

<h2>
<a id="curl-samples" class="anchor" href="#curl-samples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Curl samples</h2>

<p>Test echo <code>curl -X GET "http://localhost:8080/echo?name=Test"</code> result <code>{"counter":2,"content":"Hello, Test!"}</code></p>

<p><strong>Voting scenario</strong></p>

<p>User 'user' votes for restaurant with ID '7'</p>

<pre><code>curl --user user:userp -X POST --header "Content-Type: application/json" http://localhost:8080/vote/7"
</code></pre>

<p>Users 'user1' and 'user2' vote for restaurant with ID '8'</p>

<pre><code>curl --user user1:user1p -X POST --header "Content-Type: application/json" http://localhost:8080/vote/8"
curl --user user2:user2p -X POST --header "Content-Type: application/json" http://localhost:8080/vote/8"
</code></pre>

<p>Admin request voting results</p>

<pre><code>curl --user admin:adminp -X GET  "http://localhost:8080/vote"
</code></pre>

<p>Console example (curl request/response)</p>

<pre><code>curl --user user:userp -X POST --header "Content-Type: application/json" http://localhost:8080/vote/7"
{"status":"ok","message":"vote counted"}

curl --user user1:user1p -X POST --header "Content-Type: application/json" http://localhost:8080/vote/8"
{"status":"ok","message":"vote counted"}

curl --user user2:user2p -X POST --header "Content-Type: application/json" http://localhost:8080/vote/8"
{"status":"ok","message":"vote counted"}

curl --user admin:adminp -X GET  "http://localhost:8080/vote"
[
    {"count":0,"restaurantId":6,"restaurantName":"Restaurant Perkins"},
    {"count":0,"restaurantId":7,"restaurantName":"Restaurant Cracker Barrel"},
    {"count":0,"restaurantId":8,"restaurantName":"Restaurant le Jules Verne - Tour Eiffel Paris"}
]
</code></pre>

<h3>
<a id="support-or-contact" class="anchor" href="#support-or-contact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>Having trouble with Pages? Check out our <a href="https://help.github.com/pages">documentation</a> or <a href="https://github.com/contact">contact support</a> and weâ€™ll help you sort it out.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/ivanmakhnyk/restaurantvote">Restaurantvote</a> is maintained by <a href="https://github.com/ivanmakhnyk">ivanmakhnyk</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-69024733-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
